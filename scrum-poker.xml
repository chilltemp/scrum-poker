<?xml version="1.0" encoding="UTF-8" ?>
<Module>
  <ModulePrefs title="Scrum Poker">
    <Require feature="rpc"/>
    <!--Require feature="views"/-->
  </ModulePrefs>
  <Content type="html">
    <![CDATA[
<html ng-app="scrumPokerHangout">
  <head>
    <style>
body {
  background: #DDD;
  color: #000;
}
.person {
  list-style: none;
  padding: 5px;
  clear: both;

}
.person li {
  list-style: none;
  margin-bottom: .5em;

}
.avatar {
  /*width: 64px;*/
  height: 4em;
}
.infoBlock {
  vertical-align: top;
  display: inline-block;
  width: 220px;
}
.infoBlock p {
  margin: 0 .5em .5em .5em;
}
.pokerCardSm {
  height: 2em;
  width: 1.5em;
  border: 2px solid #aaa;
  -webkit-border-radius: 6px;
  -moz-border-radius: 6px;
  border-radius: 6px;
  float: left;
  text-align: center;
  background: #55f;
  margin: 3px;
}
.pokerCardSm div {
  font-size: 1.8em;
  background: transparent;
}
.pokerCardLg {
  height: 4em;
  width: 3em;
  border: 2px solid #aaa;
  -webkit-border-radius: 10px;
  -moz-border-radius: 10px;
  border-radius: 10px;
  float: right;
  text-align: center;
  background: #55f;
}
.pokerCardLg div {
  margin-top: .1em;
  font-size: 3em;
  background: transparent;
}
.pokerCardSliceLg {
  height: 4em;
  width: 1em;
  border-left: 2px solid #aaa;
  border-top: 2px solid #aaa;
  border-bottom: 2px solid #aaa;
  -webkit-border-top-left-radius: 10px;
  -webkit-border-bottom-left-radius: 10px;
  -moz-border-radius-topleft: 10px;
  -moz-border-radius-bottomleft: 10px;
  border-top-left-radius: 10px;
  border-bottom-left-radius: 10px;
  float: right;
  text-align: center;
  background: #55f;
}
.pokerCardSliceLg div {
  margin-top: .2em;
}
.pokerCardSm .cardNone:before { content: "?";}
.card0:before { content: "0"; }
.card1:before { content: "1"; }
.card2:before { content: "2"; }
.card3:before { content: "3"; }
.card5:before { content: "5"; }
.card8:before { content: "8"; }
.card13, .card20, .card40 { padding-top: .15em; }
.card13:before { content: "13"; font-size: .7em; }
.card20:before { content: "20"; font-size: .7em; }
.card40:before { content: "40"; font-size: .7em; }
.card100 { padding-top: .3em; }
.card100:before { content: "100"; font-size: .5em; }
.cardHalf:before { content: "\00BD"; }
.cardInf:before { content: "\221E"; }
.cardBack:before { content: "\2713"; }

.cardBreak {
  background-size: contain;
  height: 100%;
  background-position: 0 .1em;
  background-repeat: no-repeat;
/* http://www.endlessicons.com/free-icons/cup-of-coffee-icon/ */
  background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAmYAAAJmCAYAAAD2LEyKAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDowMTgwMTE3NDA3MjA2ODExOTEwOUI5NEU1QTRBNjk5MSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpFREI1RUJBM0Y1N0YxMUUxQUQzMkJEOTk4Njg4NTRCMCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpFREI1RUJBMkY1N0YxMUUxQUQzMkJEOTk4Njg4NTRCMCIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjA4ODAxMTc0MDcyMDY4MTE5MkIwQjE3OTg5MkFGNzc2IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjAxODAxMTc0MDcyMDY4MTE5MTA5Qjk0RTVBNEE2OTkxIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+tVkecwAAIJ1JREFUeNrs3f111MbCwOFxTv5/nQruUgGmAtYVYFeQdQWBCmxXAFTgpQKcChAVYCpAqSBOBX41kRSvjb3fkkbS85yjAzdwjTMK0m9n9HFwd3cXAADo3i+GAABAmAEAIMwAAIQZAADCDABAmAEAIMwAAIQZAADCDABAmAEAIMwAAIQZAADCDABAmAEAIMwAAIQZAADCDABAmAEAIMwAAIQZAADCDABAmAEAIMwAABBmAADCDAAAYQYAIMwAABBmAADCDAAAYQYAIMwAABBmAADCDAAAYQYAIMwAABBmAADCDAAAYQYAIMwAABBmAADCDAAAYQYAIMwAABBmAAAIMwAAYQYAgDADABBmAAAIMwAAYQYAgDADABBmAAAIMwAAYQYAgDADABBmAAAIMwAAYQYAgDADABBmAAAIMwAAYQYAgDADABBmAAAIMwAAhBkAgDADAECYAQAIMwAAhBkAgDADAECYAQAIMwAAhBkAgDADAECYAQAIMwAAhBkAgDADAECYAQAIMwAAhBkAgDADAECYAQAIMwAAhBkAgDAzBAAAwgwAAGEGACDMAAAQZgAAwgwAAGEGACDMAAAQZgAAwgwAAGEGACDMAAAQZgAAwgwAAGEGACDMAAAQZgAAwgwAAGEGACDMAAAQZgAAwgwAAGEGAIAwAwAQZgAACDMAAGEGAIAwAwAQZgAACDMAAGEGAIAwAwAQZgAACDMAAGEGAIAwAwAQZgAACDMAgBH41RAA9NPBwUGK39Zhsd3aO+m6u7szCAkzYwbAPr03BCDMAOjeLJgtA2EGQBLOi+0fwwDCDIBuzYptUmyZoYDtHbgIEKCnB/C0Lv7/UYXZi2LL7Z10Oe+nzYwZALuaVVEWRBkIMwC6dV79mBkKEGYAdGcW7mfLbgwHCDMAunO+8POvhgOEGQDdmIX72bLIjBnsyF2ZAH09gHd/V+aP8PCi/xf2Svqc99NmxgyAbczCw9myzJCAMAOgG+eP/rfry0CYAdCBi/BwtizKDAvszjVmAH09gHdzjdlhKK8tO1z4Z/Gi/1f2SD8476fNjBkAm3j7KMqizLDAnj5wKWeAnh7A258xm4RytuyxY3HWH877aTNjBsC6zp/4Z7eiDIQZAO2ahvIRGY9dGxoQZgC06/yZf/6noYH9cY0ZQF8P4O1dYzYrtqsn/nlcxvzNnugX5/20mTEDYJl4B+b7Z37NMiYIMwBadB5+fjxG7ZPhgf2ylAnQ1wN480uZR8X27Zlfy4OXlveS837azJgB8Jz3S37NbBkIMwBaMgvlIzKeMzdEsH+WMgH6egBvbinzqfdhLooX/Z/aA/3kvJ82M2YAPHa1JMoiy5jQ1Acu5QzQ0wN4MzNm02L7suTX8+Ci/15z3k+bGTMAanGW7GrF7/lomECYAdC8+MyyyZJfj0/6nxsmEGYANGtabG9X/J6PVZwBDXGNGUBfD+D7u8YsLmHGB8lOlvyeGGQvhFn/Oe+nzYwZAO9XRFk0F2XQwgcu5QzQ0wP4fmbMTort84rfE4PsVSjvyKTnnPfTZsYMYLzWuQsz+ijKoKUPXMoZoKcH8N1nzOLzyqYrfo9rywbGeT9tZswAxulijSiL3IkJbX7gUs4APT2Abz9jFoPsyxq/Lw/ltWXCbECc99NmxgxgXOJ1ZZ/X/L2XogyEGQDN+RyWv6C8lgVP+QdhBkBj4vPKpmv+3neGC4QZAM2YhdWvXKp9KLYbQwbtc/E/QF8P4Otf/H8Uyov911nC9HiMgXPeT5sZM4BhO9wgyqIzUQbCDIDuo+y62oCOWMoE6OsBfPVSZnzd0mzNL2cJcySc99NmxgxgmDaJsuhUlIEwA2D/ZhtGWbwLMzNs0D1LmQB9PYA/vZQZg+xqgy8TH4vxymiOh/N+2syYAQzHplEWly7PDBsIMwC6jbJQRZkHyYIwA6DjKIvXlXk0BiTGNWYAfT2Al9eYbRNlWbEdG8Fxct5PmxkzgP7aJsri0uWpoYNEP3Ap51F+wgbGGWXxYv94B2Zu+MbLeT9tZswA+uftllF2LMogbb8aAoBe2fSJ/jV3YEIPmDED6If4IvLPO0SZOzChB8yYAaRvUkXZ0ZZRNjeE0A9mzADSNi22b6IMhBkA3booti+hXMYUZTACljIB0lNfTzbd8v8vyqCnzJgBpOWk2H6IMhgnM2YAaYizZOehfEbZNurnlHkkBggzAHYwDeXzySZb/v/zUL5mSZSBMANgS4dVkJ3s8DVijMWZslvDCf3nGjOAbsQlyx87RtlclMGwmDEDaNc07LZsWXtXbB8MJwgzALYLsvOw/d2WNRf5w4BZygRoPsi+VNuuURbfd/lClIEwA2AzJ3sMsjhLFpcuT4PryWDQLGUC7E+8y3JWbH+E3a8hq8XZsbNglgyEGQBribNjb6oo26fLUL4vExBmACxxVGy/V1E22fPXzkI5S5YbZhBmAPwsLlNOQzkzNm0gxqL6WrK54QZhBsBD02p7HXa/gH+VuGz5Ibi4H4QZAP/Ngr2sfn7U0p8bH4ERZ8lyuwAQZjCcqKjFoDh84ve8XvNrfV3x69kT/yzvSVjUY1P/+LqKsUkH30scx8tnxhMYqYO7uzujMKYdfnBgEPqnDofFmFgWYKmIS3JPPeIh/rN/Noi+dcdn0f8W/lkdYqkQZHTKeV+YIcxY37SKiJdVWEwNyWAIMoQZK1nKhO7Ud/m9rmJMhA3TvAqy3FAAwgzSUgfYGyE2aDHCPgV3WQLCDJIzCeUrepp4EClpua6C7NpQAMIM0nFYhVgMsiPDMWg3CzGWGw5AmEE6JsV2XkXZoeEYrDzcz455uTggzCDRIJsZisGqZ8YyMQYIMxBktCtetB9nxb5WP7qIHxBmkLCLUF5DZslyOCGWVSEWfzQrBggz6IFpsV0Fd1j2XR1f36uf54YEEGbQL++L7W2Pvt8YHreP/vdTr0PKdwiTVa88ehl+nlWctBi29Rh8rX6eB7NhQKK8kmlsO9wrmbYVw+JLSOfRF7cLwfE9PHwv5eMY68v4Hi0Jt8UXsE+fGYsQ7l/AnoXn39UJo+a8L8wQZn13VEVZV9eSZVVg/FX9mNklgDAbJkuZsNwslMuXbUZZfSdgHWQACDMQZaG8yL9p9WMZ/gxe5QMgzIBOoizOhn0strnhBiByjdnYdrhrzNYRryn71nCQvQuuFQM64Lyftl8MATwwCeWF/k24rYLslSgD4CmWMuGhz6GZC/1jlB0HF/MDsIQZM7h3EZp5TpkoA2AtrjEb2w53jdlzmryuLEZZZoiBFDjvp82MGZTeN/R156IMgHW5xgzKV/xMG/ranwxvJ1a9v3NRHrzAHEiEpcyx7XBLmU/50mCYGfD9mTza/m8hvjYJsVWyhWD7ayHcMruAIXDeF2YIs5RNQ3OPxxBmm6sD66j6+evw8wvNuxQDLd7E8b0KNbGGMEOYIcz2KD4e40SYdWKyEGGpBdgmYpzFd5teB3feIswQZgizncLgR9NDbpj/M12IsKOeRtgqeRVon0QawgxhhjDbzCw0/z7MMQ94jK+TKsSmI/z3j5FWvwv11l83hBnCDGG23EWxnTf8Z7wI47nj76gKsJdVkB36T+xft1WcfQzu/kSYIcwQZs9q+vqyUJ2QzwY4dpPwcFly6j+ntf97eBfMoCHMEGYIs580+ZiMRWfVCbnvEbYYYmbDthejLM6eXRgKhBnCTJgZhHvx+rJZS3/Wh2K7DOnPlEyrEHsZHj62gv3Lq2jPDAXCDGEmzGjnGrPHJ+IULgavnxU2qbY+P6piCC6D2TOEGcJMmPHv9WWfO/qz4yMV4rOv4iMVsga+/rT6sZ7xeln9OLXbkxT/OzgNbg5AmDlP20HCbMQmofnnmK0rXzgpf93g//d64eeWHfvttoqzzFAgzIQZwmysvoX9vWMR9qHvN4sgzNjBL4aAkftoCEhMvCnlwjDAOJkxG9sON2P2lLicOTEMJGYehvkMPDrmvJ82M2ZQPvATUjML7T3OBUiEGbOx7XAzZs9p4y0AtC/e7bjJo0mmCf47xBsCru1K9sV5X5ghzPog3s0Y3wTgRoC03VaxFdV3r+bh/o7WxZ/vqr7Ltf6xq7cexH/nF8FrnBBmwgxhJs7oQB1XMcD+CeXjIxaDrGuTUM6svQ73b0poWpwxO/WfBsJMmCHMxBlNB1j9oN3b0M9neMX/Vv4I5VJ4k7Npx8EzzhBmwgxhNtI4ex9ceL1PWRVff4Xm3naQwn83Mc7ia74mDXx9s2YIM2GGMBu1eJK9Cp6mv22Efa9+vBnhGFyEchZt3//t+AuMMBNmCLNRiyfWt6Hdl533yc1ChGUjjbDnTEJ5t+8+l8UtZyLMhBnCjOokOwvNzIL0RQyCPNzPhAmE9VyF/S2Le10TwkyYIcx4JJ5k34ThPvcsDw8vys+DmbBU4uwyeF0TwkyYIcx4Un2xd5uPTdinLJR3QtYzYH29K7IvvoXdlzUtZSLMhBnCjDVNFgKtq4eRPg6vEO6fB1bH16ZPw2d//3382PFrxAfN5oYSYSbMEGZsb1r9uBhqr5/4ffVT5mv5kpNwHVshPHz4akoPYuVnF2H7G0nifn1lCBFmwgxhBuzHJGw/a+admQizEfjFEAC0Jt8yrjJRBsIMgP37vkXMeeI/CDMAGpBt8HtvqyhzswYIMwA6VF/s72YOEGYAdGgeymeW5YYCxuVXQwCQjLhkGV+75EJ/EGYAtODwmSD7WGwfguvJQJgB0JojQQY8xwNmx7bDPWAWuvat+jEG2bUgo23O+8IMYQbcmwQX9SPMEGYIMwCc99PmcRkAAMIMAABhBgAgzAAAEGYAAMIMAABhBgAgzAAAEGYAAMIMAIBd/GoIRueLIQDYybEhoCnelTm2HX5wYIcD7Hgo7fM377yfNkuZAADCDAAAYQYAIMwAABBmAADCDAAAYQYAIMwAABBmAAA95ZVMALA/R8X2R7H9VWxZsd0U261hYV1eyTS2He6VTAA7H0qX/NpJsX1+9M9uqu1rFWt5l9+8837azJiNT/zkdmgYABpx9Mw/i9tsIdRioH2qfg7/cY3Z+DgIAOz24XYf8fa22L4V249ie/9M0CHMAIAWP9xOFiItbrNgVUOYAQB78XqH/2+cNbsK97NoE8MpzACAbsUZs7dVoF0JNGHGsLltG6A/ZlWgXQRLnMKMQfpuCAC2tuoas6Yu4j+vAu3ELhBmAEDpnxW/3uSsVvzan6vN7JkwAwASEGfNzJ4JMwbCc8wAtrfsOt1pi99HPXt2YZcIM4Z7UAGgXx9u47VnV8HSpjADAB7oKo5mxfZFnAkzfNoDGJtlqw5dvlbpSJwJM4Z3UAGgvx9uY5x9touEGQCw2+uY9mUaymvOEGb0SGYIADaW9+T7nFUbwgwARhtmRwl9r+8T+34QZgzgUx9ASlZdo5vShffxe7GkKczoib8MAcDGlr1reJrg9xtnzN7abcKM/n/qA2AzcYYqS/D7Og8eoSHMSJ5nmQFsbll4XRfbcbEdFNuL6ueXCcRajDKzZj1ycHd3ZxTGtMMP4jHj3+ntb0YDYCPHO4RWfOH4m+rHtmewbqtY/He1xHlfmJFemP37d9NoAGx2CN3T14lx9kdo97q0s2KbCzNhRrph9ndw3QFAF2FWm4TysRYnLXzv8RKWV8Isfa4xGy/XmQGsL2vga+bFdhrKJdK84e//qApBhBmJyg0BwNqavJs9Rl+czZo3/O9wYjcKM9LlWWYA6/veQvidVVtTXtuNwox0WcoEWF/e0p8zbzDOpnajMCNdHjILkF6Y1XF22cDXjTd8TezKtLkrc2w7/ODBTUV2PsB6fuvgA2183uS+X0R+XJz3M7szXWbMfAIEYLnb0M0qw7sGvubU7hRmCDOAPuvqmtwspPn+TYQZDflqCACSDbPo056/3v/sTmFGunJDALBSl48Xyvb89SZ2pzBDmAH0WZczZo7TwowRyQwBQNJh5lgtzBgZn8YAlh8jPfcRYcZoPgkC+PDaHpEpzEjcd0MA8KwU7l6fOuYLM8YjMwQAz+p6VeHQLhBmOOgAkMYxcrrnr5fbpcKMtN36iwqQ7PHxtTATZvhECEAal3qcON4LM8bHq5kAftb1hfLTsN8n9Xf1MnaEGT5BAews6/jP/92xXpjh4ANA9yEzKbbZnr+m1RFhhjgD6G2Udbnsd+44L8xwEAKg+4iZhP3PlgkzYUbPmOIGuNflhf9NzJZd26XCDJ8OARwTNzMNzcyW/WmX9sPB3d2dURjTDj84WPbL34rtyCgBI5cX24uO/uymjsO/heqaOef9tJkxI4VPiACOhSFcNBRl8+D5ZcKMXnKdGUA3x8IYZOcNfe1Pdml/WMoc2w5fvpR5WGx/GyVg5P5b9mtJPPbGJcxJA187K7bjxX/gvJ82M2Ysigcij80Axqzt55fFKPvSUJRFZsuEGT3nzh1gzLIOouyowX+XuV0qzHBQAuirtq4vazrKoku7s39cYza2Hb78GrPa39VBA2B0h8mBRFl8oOzpU7/gvJ82M2Y8JTMEwAi18XT8oxaiLF4j987uFGYMh+vMgDFqehmzjSiL4hJmbnf2k6XMse3w9ZYyPTYDGKMXDQbNtNg+h+YvE8nCo8djPOa8nzYzZjzFYzOAsblpMMpmoZwpazrK4rH71K4UZgyTZ98AY9LUJRzvi+2qpX+Hs+DVS8KMwbo2BIBj3tbi7Fhcunzb0vd/6bg9DK4xS30HHRx0+cfHV4Qc2QvAwOWhvL5sX+Jx86rF4+e8OJef2Y3DYMaMZTJDAIzAPmeaTkI7d17W4rVxHo0hzBgJ15kBjnXri9eTtXHn5WKUxTswXVc2IJYyU99B3S5lRj9Ccy/XBehaHnZfxmx76TJUMXZcxZlHYAyIGTNW+WgIgAHbdRkzXtzf5tLlT1HGsJgxS30HdT9jNgnlrBnAEL3aMnDisTHOkk1b/n6fjDLn8uEwY8YquU9lwEDdbHl8i7Nk31KJMoQZ4+MmAMCxrQyxGGTxIv/Dlr/XGGPbzu7RI5YyU99B3S9lhuDdmcAwrftuzEmxnYfy1UpdWHn3pXP5cJgxYx3xYOCJ0sCQXK8RZTHI4nVkPzqMsuvgkRjCDJ5gORMYkj8TD7LoQyhfSi7KRsRSZuo7KI2lzJpnmgFDEEPnt2d+LT65/3MC3198mv983f+Dc/lwmDFjE2bNgCFYFjxvOv7e8lAuXc7tpnEyY5b6DkprxmwSPNMM6L9lF/3HG50OO/q+4vVk8WXkGy9dOpcPhxkzNv0k5yYAoM+yJVF20mGUxaVL15MhzNiY5UxgqMew3zv4furnk32wa4gsZaa+g9Jayqy5CQDoozw8/8LyLp7XGGPsMuxhlsy5fDjMmLENLzYH+mjZbNlJy4EYL/B/FyxdIszYg7mDCdAz8Zi1bLmwrbsx4/cQly4zuwRhxj4PcHPDAPTI9ZIPlJPQ/IxZHsySIcxokOVMoE8ul/xak1F2W/3Z8dq2zG5AmNHkp7+5YQB6YB6Wvxezqbsx4yxdXLa8sAtYl7syU99Bad6VWZsED5wF0heXELMWj2MxAs9CizNkzuXDYcaMXQ8+HjgLpCxbEUj7XMas33Fp2ZKtmTFLfQelPWMWTYvtiz0FJOp4RSTt47mMMcjidbcfQkcX9juXCzOE2aIvVaABpCSrwuw5R8X2bcc/Yx7Ki/vzLv9FncuHw1Im+3BpCIAeHpt2ueg/BllcsjzrOsoYFjNmqe+gfsyYRWbNgJRkYflsWbTNMuY8JDBD9phz+XCYMWNf3hkCICGrZsuONoyyGGRmyBBm9MZN8FwzIA3xbvFsxe/5Y42vU7/GSZDRGkuZqe+g/ixlhuC5ZkAaXqwRUX8X2+Ezvxb/v59Ch3dZbsq5fDjMmLFPeVj+kmCAps3XiLKTZ6IszvyfVWF3EbzTkg6YMUt9B/VrxixUB7sfSz6JAjTltoqqVUF1VWyzRzH3sQqzXnIuHw4zZjRxYPT4DKALH8N6s1wnVYTFm5Z+C+Us2Y3hIwVmzFLfQf2bMavt42naAOvKQzlbtsphdWwaVIg5lw+HGTOacmYIgBat+8ie22B2DGHGCGXBC84BxxvYiKXM1HdQf5cyo0ko30PnRgCgKXEG7FUY+TPGnMuHw4wZTYoHSjcCAE36GDz4lQExY5b6Dur3jFktzpod2ZvAnsVrxV4ZBjNmQ2LGjDa4EQBwbAFhRkKfai1pAvt0GdxdyQBZykx9Bw1jKbNmSRPY14c9S5gLnMuHw4wZbbLsADiWgDAjoU+57wwDsANLmAyapczUd9CwljJrX4ptau8CG8qK7dgw/My5XJghzHYRHzj7I3jwLLA+D5IVZqNgKZOuDrCuEQE2cSbKEGbQnPheuw+GAVjDh+BdmIyEpczUd9AwlzIXud4MWMajMdbgXC7MEGb74noz4DnxsocX1Y8Is1GwlEkKB153WQFPORZlCDNoX1yqcDMAsOgseF4Zwgw6Mw9uBgDujwdzw8AYucYs9R00/GvMHrsqtpk9D6MV7748NQybcS4XZgizpsSbAOKdml52DuMTly5dVybMhBnCTJwBHctD+VgMUSbMRs01ZqQoHphPHaDB33kQZpDOp2dLGjCOKIt/192BCcKMxLneBEQZCDMQZ4AoA2EG4gxEGQgzEGeAKANhBuIMRBkgzBBngCgDYQa7xtkrB3jo3Qcqf2dhBU/+T30HjfPJ/+vyhgDoT5SZ5W6Qc/lwmDGjz+KBPs6czQ0FJGkuykCYMT5nxXZpGCApH6q/m6IMNmApM/UdZClzEyfFdhXKJU6gGzHE3gUz2a1yLhdmCLNUHVVx5rozaF8eypeRu8hfmLElS5kMTX2h8bWhgFbFv3PulgZhBj+5rT61vzMU0Ip31d8515PBjixlpr6DLGXuytImNCcPli6T4Fw+HGbMGLp6afODoYC9in+nLF3CnpkxS30HmTHbp2koZ88mhgK2lofyMRiZoUiHc/lwmDFjTLLqE77ZM9hOPUsmyqAhZsxS30FmzJoyLbb3wbVnsI48mCVLmnP5cJgxY6yy6pN/fGOAO8ngabfV35EXogzaYcYs9R1kxqwNk2I7L7aZoYD/xOeSxcdg5IYifc7lw2HGDO6XaY7NCsC/fwfi34VTUQbtM2OW+g4yY9aFaXD3JuP8gBJnyLw1o4ecy4fDjBn8LAvlNTVnwYwB4wiys+q/eVEGwgySNRdojCTI5oYD0mApM/UdZCkzJSfF9kcolzqhr7Ji+yTGhsW5XJghzMYshtnvwV2c9Mu8CrLMUAgzhBnCbIgmVZz9HtwoQJrycD87lhsOYYYwQ5iNxUkVaCeGggRcV0HmYn5hhjBDmI3aYbi/Fs3rnmjTTbifHfM2C2GGMEOY8cgk3M+kiTSajLE4M5YbDmGGMEOYsX6kTYvtTbDcyW5ihP0Zyov4xRjCTJghzNiDOtLij2bTWOamirCvwTVjCDNhhjCjcYdVoL2uIm1qSIRYFWLxR9eLIcyEGcKMjk2rSHtZ/WhWbbgRFrfvC0EGwkyYIczoSaxNqi3Orh0Ktt7Iq+3rws9FGMIMYSbMGKA61o6qWPtfuH/g7dTwtCJbCLC/Qrn8eLMQYSDMEGbCDP6zOLs2WQi3xYirw477sKp//n0hvOrQugmu/0KYIcyEGbRgMd4eL5m+fub3pWoxpqKvCz9fjKvHvw+EGcIMYcZggu6pqKu9DJvPzi3OXIVn4kpgIcwQZggzAIQZu/vFEAAACDMAAIQZAIAwAwBAmAEApO1XQ5C8k+C1OwBDFR/3cm0YqHlcRuo76OBgUvzwLXgiO8DQxOfvHYf7t0xszbl8OCxlpi+v/uJ69QuAKEOYkYAbcQYgyhBmpBdnuaEAEGUMk2vMUt9BP7+SKV5r9iW4IQCgrx+w97764Vw+HGbM+vlp61WxzQ0FQG/Mg0tSEGaDdlZsp/6SAyT/Yfqs2hyvWclSZuo76OelzMfi0uZVKJ93BkA6sirI8qb/IOfy4TBjNoxPY6fVlhsOgM7l1THZDVtszIxZ6jto9YzZYxfF9kfwQFqALj4ofyy2D6HlZUvncmFGumEWqih7W2y/F9vEKAI0Ki+2T10EmTATZvQjzBbNiu1NcA0awL5lVZDNu/5GnMuFGf0Js9qkirMYaVMjC7B1jP0ZyheP56l8U87lwoz+hdlj02p7XUXbxGgDPBCXJeNDYb9WP2Yh0UdeOJcLM/ofZs/FWuhBqL0Mlmahj+Is0/eEv7883M+CZX0aWOdyYcYww6xPPosz6JUYOseGQZghzITZMHlnKPRHY++IRJgJM4RZOibF9i14Zhuk7LaKshtDIcxYzZP/6bM8lE/XBtJ1JspgfWbMUt9BZszWMQvl+0KBtLwL5UNXR8n5FWEmzMbsqgo0IA3zUM6WjZbzK8JMmI1dvN7MzQDQPRf7CzOEmTDj35sAYpxNDAV0JsbYi+AOTGHGVlz8z9BOCKdOCNApj8UAYQb/iUso7wwDdMIdmLAjS5mp7yBLmduK15p5vhm051aUPeT8ijADAOgxS5kAAMIMAABhBgAgzAAAEGYAAMIMAABhBgAgzAAAEGYAAMIMAABhBgAgzAAAEGYAAMIMAABhBgAgzAAAEGYAAMIMAABhBgAgzAAAEGYAAMIMAABhBgCAMAMAEGYAAAgzAABhBgCAMAMAEGYAAAgzAABhBgCAMAMAEGYAAAgzAABhBgCAMAMAEGYAAAgzAABhBgCAMAMAEGYAAAgzAABhBgCAMAMAQJgBAAgzAACEGQCAMAMAQJgBAAgzAACEGQCAMAMAQJgBAAgzAACEGQCAMAMAQJgBAAgzAACEGQCAMAMAQJgBAAgzAACEGQCAMAMAQJgBACDMAACEGQAAwgwAQJgBACDMAACEGQAAwgwAQJgBACDMAACEGQAAwgwAQJgBACDMAACEGQAAwgwAQJgBACDMAACEGQAAwgwAQJgBACDMAAAQZgAAwgwAAGEGACDMAAAQZgAAwgwAAGEGACDMAAAQZgAAwgwAAGEGACDMAAAQZgAAwgwAAGEGACDMAAAQZgAAwgwAAGEGACDMAAAQZgAAwgwAAGEGAIAwAwAQZgAACDMAAGEGAIAwAwAQZgAACDMAAGEGAIAwAwAQZgAACDMAAGEGAIAwAwAQZgAACDMAAGEGAEBr/l+AAQAqj6bdyPO6qwAAAABJRU5ErkJggg==);
}

/* card glow yellow */
.consensus {
  background: radial-gradient(ellipse at center, yellow 0%,#55f 100%);
}

.cardStateNone {
  border-style: dotted;
  border-color: #000;
  background: #aaa;
}
.cardStateSelected {
  border-color: yellow;
  color: yellow;
}
.cardStateToggle {
  background: yellow;
}
.info {
  clear: both;
}
/*.info:before {
  content: "\2713\2714\2605\2606\265e\2660\2661\2662\2663\2664\2665\2666\2667\2668\2622\2623"
}*/
.noApp {
  color: grey;
  font-style: italic;
}
.buttons {
  float: right;
}
.buttons button {
  display: block;
}
.buttons button.btn-horiz {
  display: inline-block;
}

.animate.ng-enter, 
.animate.ng-leave { 
    transition: 2000ms cubic-bezier(0.55, 0.055, 0.675, 0.19) all;
    position: relative;
    display: block;
} 
 
.animate.ng-leave.animate.ng-leave-active,
.animate.ng-enter {
    transform: scaleY(0);
    height: 0px;
    opacity: 0;
}
 
.animate.ng-enter.animate.ng-enter-active,
.animate.ng-leave {
    transform: scaleY(1);
    height: 30px;
    opacity: 1;
}    </style>
  </head>
  <body ng-controller="mainCtrl">
    <h1>Scrum Poker</h1>

    <div>
      <div class="pokerCardSm" ng-repeat="card in cards" ng-click="selectCard(card)"
        ng-class="{cardStateNone: card == 'None', cardStateSelected: card == state.cardSelected, cardStateToggle: card == 'Break' && state.needBreak}"><div class="card{{card}}"></div></div>
    </div>
    <div class="buttons">
      <button ng-click="showAll(false)" ng-show="reveal" title="Will hide all cards from everyone.">Hide All</button>
      <button ng-click="showAll(true)" ng-hide="reveal" title="Will show all cards to everyone.">Show All</button>
      <button ng-click="resetAll()" title="Will reset everyones cards to ?, and hide all.  NO UNDO">Reset All</button>
      <button class="btn-horiz" ng-click="mainListSize(-1)">-</button>
      <button class="btn-horiz" ng-click="mainListSize(1)">+</button>
    </div>

    <div id="mainList"
      <ul class="person" >
        <li ng-repeat="person in people | orderBy:'displayName' | filter:{online: true} " class="animate">
          <img class="avatar" src="{{person.image}}" alt="avatar" />
          <div class="infoBlock">

            <div class="pokerCardLg" ng-class="{cardStateNone: person.state.cardSelected == 'None', consensus: consensus}">
              <div ng-show="reveal" class="card{{person.state.cardSelected}}"></div>
              <div ng-show="!reveal && person.state.cardSelected == 'None'" class="cardNone"></div>
              <div ng-show="!reveal && person.state.cardSelected != 'None'" class="cardBack"></div>
            </div>
            <div class="pokerCardSliceLg" ng-show="reveal" ng-repeat="card in person.state.cardHistory track by $index">
              <div class="card{{card}}"></div>
            </div>
            <div class="pokerCardLg" ng-show="person.state.needBreak"><div class="cardBreak"></div></div>

            <p class="displayName" ng-class="{noApp: !person.hasAppEnabled}">{{person.displayName}}</p>
            <p class="noApp" ng-hide="person.hasAppEnabled">Scrum Poker not loaded.</p>

          </div>

        </li>
      </ul>
    </div>


    <div class="info"></div>
    <script src="//plus.google.com/hangouts/_/api/v1/hangout.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.2.25/angular.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.2.25/angular-animate.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.7.0/underscore-min.js"></script>
    <script>

function createDefaultState() {
	return {
		cardSelected: "None",
		cardHistory: [],
		needBreak: false
	};
}

var pokerApp = angular.module('scrumPokerHangout', ['ngAnimate']);

pokerApp.controller('mainCtrl', function ($scope) {

	$scope.cards = ["0","Half","1","2","3","5","8","13","20","40","100","Inf","Break","None"];
	$scope.people = [];
	$scope.state = createDefaultState();
	$scope.reveal = false;
	/* Additional properties defined in the resetMe function below. */


	$scope.update = _.debounce($scope.$apply, 100);

	$scope.mainListSize = function(delta) {
		var fontSize = parseInt($("#mainList").css("font-size"));
		fontSize = fontSize + delta + "px";
		$("#mainList").css({'font-size':fontSize});
	};

	$scope.selectCard = function(card) {
		if($scope.state.cardSelected === card) {
			return;
		}

		if($scope.reveal && $scope.state.cardSelected && $scope.state.cardSelected !== "None") {
			$scope.state.cardHistory.unshift($scope.state.cardSelected);
		}

		if(card === "Break") {
			$scope.state.needBreak = !$scope.state.needBreak;
		} else {
			$scope.state.cardSelected = card;
		}

		$scope.update();
		$scope.sync();
	};

	$scope.sync = _.debounce(function() {
		var key = gapi.hangout.getLocalParticipantId();
		var value = JSON.stringify($scope.state);

		gapi.hangout.data.setValue(key, value);
	}, 250);

	$scope.resetAll = function() {
		gapi.hangout.data.setValue('!resetAll', (JSON.stringify(new Date())));
		$scope.showAll(false);
	};

	$scope.showAll = function(reveal) {
		gapi.hangout.data.setValue('!reveal', JSON.stringify(reveal));
		$scope.reveal = reveal;
		$scope.update();
	};

	$scope.hasConsensus = function() {
		var card = null;
		for (var s = $scope.people.length - 1; s >= 0; s--) {
			if($scope.people[s].state.cardSelected === "None") {
				return false;
			} else if(card === null) {
				card = $scope.people[s].state.cardSelected;
			} else if(card !== $scope.people[s].state.cardSelected) {
				return false;
			}
		}

		return true;
	};

	$scope.applyStateChange = function(eventObj) {
		$scope.consensus = false;

		for (var e = eventObj.addedKeys.length - 1; e >= 0; e--) {

			if(eventObj.addedKeys[e].key === '!resetAll') {
				if(eventObj.addedKeys[e].value != $scope.lastReset) {
					$scope.resetMe(eventObj.addedKeys[e].value);
				}
			} else if(eventObj.addedKeys[e].key === '!reveal') {
				$scope.reveal = JSON.parse(eventObj.addedKeys[e].value);

				if($scope.reveal) {
					$scope.revealsSinceReset++;
					if($scope.revealsSinceReset === 1 && $scope.people.length > 1) {
						$scope.consensus = $scope.hasConsensus();
					}
				}
			} else {
				for (var s = $scope.people.length - 1; s >= 0; s--) {
					if( $scope.people[s].id === eventObj.addedKeys[e].key ) {
						$scope.people[s].state = JSON.parse(eventObj.addedKeys[e].value);
					}
				}
			}
		}

		$scope.update();
	};

	$scope.applyParticipants = function(participants) {
		for (var e = participants.length - 1; e >= 0; e--) {

			var found = false;			
			for (var s = $scope.people.length - 1; s >= 0; s--) {
				if( $scope.people[s].id === participants[e].id ) {
					found = true;
					$scope.people[s].hasAppEnabled = participants[e].hasAppEnabled;
					$scope.people[s].online = true;
				}
			}

			if(!found) {
				$scope.people.push({
					id: participants[e].id,
					displayName: participants[e].person.displayName,
					image: participants[e].person.image.url,
					state: createDefaultState(),
					online: true
				});
			}
		} // for: eventObj.participants

		$scope.update();
	};

	$scope.resetMe = function(resetTime) {
		$scope.lastReset = resetTime;
		$scope.consensus = false;
		$scope.selectCard('None');
		$scope.state.cardHistory = [];
		$scope.revealsSinceReset = 0;

		$scope.update();
	};
	$scope.resetMe(null);

	gapi.hangout.onApiReady.add(function(eventObj){
		if (eventObj.isApiReady) {

			var participants = gapi.hangout.getParticipants();
			var state = gapi.hangout.data.getState();

			$scope.applyParticipants(participants);

			// Create a similar object to the state change event
			var e = { addedKeys: [] };
			for(var key in state) {
				if (state.hasOwnProperty(key)) {
					e.addedKeys.push({ key: key, value: state[key] });
				}
			}
			$scope.applyStateChange(e);
		}
	});

	gapi.hangout.data.onStateChanged.add(function(eventObj) {
		$scope.applyStateChange(eventObj);
	});

	gapi.hangout.onParticipantsChanged.add(function(eventObj) {
		$scope.applyParticipants(eventObj.participants);
	});

	gapi.hangout.onParticipantsRemoved.add(function(eventObj) {
		for (var e = eventObj.removedParticipants.length - 1; e >= 0; e--) {
			for (var s = $scope.people.length - 1; s >= 0; s--) {
				if(eventObj.removedParticipants[e].id == $scope.people[s].id) {
					$scope.people[s].online = false;
				}
			}
		}

		$scope.update();
	});
});
    </script>
  </body>
</html>
    ]]>
  </Content>
</Module>